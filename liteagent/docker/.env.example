# LiteAgent Environment Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# Core Settings
# =============================================================================

# Application mode: development, production
APP_ENV=production

# Secret key for session encryption (generate with: openssl rand -hex 32)
SECRET_KEY=change-this-to-a-secure-random-string

# JWT secret for authentication (generate with: openssl rand -hex 32)
JWT_SECRET=change-this-to-another-secure-random-string

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL connection
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=liteagent
DATABASE_URL=postgresql://postgres:postgres@db:5432/liteagent

# Connection pool settings
DB_POOL_SIZE=30
DB_MAX_OVERFLOW=10

# =============================================================================
# Redis Configuration
# =============================================================================

# Redis connection
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://redis:6379/0

# Celery broker (uses Redis DB 1)
CELERY_BROKER_URL=redis://redis:6379/1

# =============================================================================
# Vector Database (Qdrant)
# =============================================================================

QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_URL=http://qdrant:6333

# Collection settings
QDRANT_COLLECTION=liteagent_embeddings

# =============================================================================
# Sandbox Service
# =============================================================================

# Sandbox mode: local (development) or remote (production)
SANDBOX_MODE=remote
SANDBOX_ENDPOINT=http://sandbox:8194
SANDBOX_API_KEY=liteagent-sandbox

# Execution limits
SANDBOX_EXECUTION_TIMEOUT=30
SANDBOX_MAX_WORKERS=4
SANDBOX_MAX_MEMORY_MB=256
SANDBOX_ENABLE_NETWORK=false

# =============================================================================
# API Server
# =============================================================================

API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# CORS settings
CORS_ORIGINS=["http://localhost:3000","http://localhost:80"]

# =============================================================================
# Web Server
# =============================================================================

WEB_HOST=0.0.0.0
WEB_PORT=3000

# API URL for frontend
NEXT_PUBLIC_API_URL=http://localhost/api

# =============================================================================
# Nginx Gateway
# =============================================================================

NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# =============================================================================
# Celery Worker
# =============================================================================

# Number of worker processes
CELERY_WORKER_CONCURRENCY=4

# Worker queues
CELERY_QUEUES=default,indexing,workflow,embedding

# Enable autoscaling
CELERY_AUTOSCALE_MIN=1
CELERY_AUTOSCALE_MAX=8

# =============================================================================
# LLM Providers (configure at least one)
# =============================================================================

# OpenAI
OPENAI_API_KEY=
OPENAI_API_BASE=https://api.openai.com/v1

# Anthropic
ANTHROPIC_API_KEY=

# Azure OpenAI
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# =============================================================================
# Embedding Models
# =============================================================================

# Default embedding model
DEFAULT_EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536

# =============================================================================
# Observability
# =============================================================================

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# OpenTelemetry (optional)
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# Sentry (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# =============================================================================
# Storage
# =============================================================================

# File storage type: local, s3, azure
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=/data/files

# S3 settings (if STORAGE_TYPE=s3)
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1
S3_ENDPOINT=

# =============================================================================
# Rate Limiting
# =============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100/minute
RATE_LIMIT_BURST=10
